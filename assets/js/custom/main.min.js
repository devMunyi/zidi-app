function functions_load(){spinner("#functions_");const e=currentLoc(),t=$("#server_").val();if(e&&e.allFuns&&e.allFuns.data){const{data:n}=e.allFuns,o=n.length;o>0?apiSubfunLoad((s=>{let a="",l=0,i="",r=0;for(let c=0;c<o;c++){const o=n[c].uid,d=n[c].name,m=n[c].icon;e&&e.func>0&&(l=e.func,i=o==l?"active-two":""),a+=`<li class="outer_list" id="func-item-${o}"> \n          <a id="funcitem${o}" class="${i} func-item has-arrow arrow-b" href="javascript:void(0)" \n          onclick="highlightFun(); parseInnerListId('${o}'); submenu('#fun${o}'); title_update('${d}'); persistence('func',${o}); persistence_remove('subfunc'); getAllSolns('${o}','','','','');">\n          <img class="icon" src="${t}/${m}"/>\n          <span data-hover="${d}">&nbsp;${d}</span></a>`;const u=s.data,p=u.length;if(p>0){let t="";a+=`<ul class="inner_list" style="display: none;" id="fun${o}">`;for(let n=0;n<p;n++){if(o===u[n].function_id){const s=u[n].uid,l=u[n].name;e&&e.subfunc>=0&&(r=e.subfunc,t=s==r?"active-two":""),a+=`<li class="subfunc_" id="subfunc-item-${s}">\n              <a class="subfunc${o} subfunc-item ${t}" href="javascript:void(0)" \n              onclick="subfun('#fun${o}'); title_update('${d} / ${l}'); persistence('func', ${o}); persistence('subfunc', ${s}); highlightSubfun('${o}'); getAllSolns('','${s}','','','');">\n               <span class="subfun_" data-hover="${l}"><i class="fe fe-chevrons-right" data-toggle="tooltip" title="" data-original-title="fe fe-arrow-up-right"></i>${l}</span>\n              </a>\n              </li>`}}a+="</ul>"}a+="</li>"}$("#functions_").html(a),scrollElementIntoView2(l)})):$("#functions_").html("No record found")}else{crudaction({},`/functionalities${`?status=${1}&orderby=${"name"}&dir=${"ASC"}&offset=0&rpp=500&search=${""}`}`,"GET",(n=>{if(n&&n.data&&n.data.length>0){persistence("allFuns",n);const{data:o}=n,s=o.length;apiSubfunLoad((n=>{let a="",l=0,i=0,r="";for(let c=0;c<s;c++){const s=o[c].uid,d=o[c].name,m=o[c].icon;e&&e.func>0&&(l=e.func,r=s==l?"active-two":""),a+=`<li class="outer_list" id="func-item-${s}"> \n            <a id="funcitem${s}" class="${r} func-item has-arrow arrow-b" href="javascript:void(0)" \n            onclick="highlightFun(); parseInnerListId('${s}'); submenu('#fun${s}'); title_update('${d}'); persistence('func',${s}); persistence_remove('subfunc'); getAllSolns('${s}','','','','');">\n            <img class="icon" src="${t}/${m}"/>\n            <span data-hover="${d}">&nbsp;${d}</span></a>`;const u=n.data,p=u.length;if(p>0){let t="";a+=`<ul class="inner_list" style="display: none;" id="fun${s}">`;for(let n=0;n<p;n++){if(s===u[n].function_id){const o=u[n].uid,l=u[n].name;e&&e.subfunc>=0&&(i=e.subfunc,t=o==i?"active-two":""),a+=`<li class="subfunc_" id="subfunc-item-${o}">\n                <a class="subfunc${s} subfunc-item ${t}" href="javascript:void(0)" \n                onclick="subfun('#fun${s}'); title_update('${d} / ${l}'); persistence('func', ${s}); persistence('subfunc', ${o}); highlightSubfun('${s}'); getAllSolns('','${o}','','','');">\n                 <span class="subfun_" data-hover="${l}"><i class="fe fe-chevrons-right" data-toggle="tooltip" title="" data-original-title="fe fe-arrow-up-right"></i>${l}</span>\n                </a>\n                </li>`}}a+="</ul>"}a+="</li>"}$("#functions_").html(a),scrollElementIntoView2(l)}))}else $("#functions_").html("No record found")}))}}function parseInnerListId(e){$("#inner-list-dom-id").val(`#fun${e}`),$("#inner-list-dom-class").val(`.subfunc${e}`)}function subfun(){}function scrollElementIntoView2(e){submenu(`#fun${e}`),setTimeout((()=>{const t=document.getElementById(`func-item-${e}`);t&&t.scrollIntoView({block:"nearest"})}),50)}function submenu(e){$(e).toggle();const t=e.match(/\d/g).join("");$(`.subfunc-${t}`).show()}function highlightSubfun(e){$(".func-item").removeClass("active-two"),$(".subfunc-item").removeClass("active-two"),$(`#funcitem${e}`).addClass("active-two"),$("#inner-list-dom-id").val(`#fun${e}`),$("#inner-list-dom-class").val(`.subfunc${e}`);const t=$("#inner-list-dom-id").val(),n=$("#inner-list-dom-class").val();$(`.func_ ${t}`).on("click",n,(function(){$(this).addClass("active-two")}))}function highlightFun(){$(".func_").on("click",".func-item",(function(){$(".func_ .func-item").removeClass("active-two"),$(this).addClass("active-two");const e=$("#inner-list-dom-id").val();e?(lastChar=e.charAt(e.length-1),$(`.inner_list:not(${e})`).fadeOut("fast")):$(".inner_list").fadeOut("fast")}))}function apiSubfunLoad(e){const t=currentLoc();if(t&&t.allSubfuns){const n=t.allSubfuns;e(n)}else{crudaction({},`/subfunctionalities${`?status=${1}&orderby=${"name"}&dir=${"ASC"}&offset=${0}&rpp=${500}`}`,"GET",(t=>{e(t),persistence("allSubfuns",t)}))}}function filterSubFuncByFunc(){const e=currentLoc();if(e&&e.allSubfuns){const t=e.allSubfuns.data,n=parseInt($("#func_sel").val().trim());let o='<option value="">--Select One</option><option value="0">No subfunction</option>';if(n>=0){const e=[];for(let o=0;o<t.length;o++)n==t[o].function_id&&e.push(t[o]);if(e.length>0){for(let t=0;t<e.length;t++)o+=` <option value="${e[t].uid}">${e[t].name}</option>`;$("#subfunc_sel").html(o)}else $("#subfunc_sel").html(o)}else{for(let e=0;e<t.length;e++)o+=`<option value="${t[e].uid}">${t[e].name}</option>`;$("#subfunc_sel").html(o)}}}function load_languages(){spinner("#language_");const e=persistence_read("language"),t=currentLoc(),n=$("#server_").val();if(t&&t.allLangs){const{data:o}=t.allLangs;if(o.length>0){let s,a="",l="",i="";const r=o.length;for(let c=0;c<r;c++){const{uid:r}=o[c],d=o[c].name,{icon:m}=o[c];t&&t.language>0&&(s=t.language,i=r==s?"active-two":""),a+=`<li class="hover-lang" id="lang-item-${r}" style="margin: 0px; padding: 0px;">\n          <a class="lang-item ${i}" href="javascript:void(0)"\n          onclick="highlightLang(); persistence_remove('allFrams'); persistence_remove('codestyle'); persistence_remove('framework'); persistence('language', ${r}); getFramsByLang(${r});  clear_code_screen(); getAllSolns('','','${r}','','');">\n          <img src="${n}/${m}" height="20px">&nbsp;${d}</a></li>`,e||(l+=`<a onclick="default_lang(${r},'${d}');" class="btn btn-outline-secondary">${d}</a>`)}$("#language_").html(a),e||$("#language_select_modal").html(`<div class="btn-list">${l}</div>`),s&&scrollElementIntoView(`lang-item-${s}`)}else $("#language_").html("<li>No Languages</li>"),$("#language_select_modal").html("Unable to load languages")}else{const e="status = 1",o="ASC",s="name",a=0,l=100,i=persistence_read("language");crudaction({},`/languages${`?where_=${e}&orderby=${s}&dir=${o}&offset=${a}&rpp=${l}`}`,"GET",(e=>{if(e&&e.data&&e.data.length>0){persistence("allLangs",e);const{data:o}=e;let s,a="",l="",r="";const c=o.length;for(let e=0;e<c;e++){const{uid:c}=o[e],d=o[e].name,{icon:m}=o[e];t&&t.language>0&&(s=t.language,r=c==s?"active-two":""),a+=`<li class="hover-lang" id="lang-item-${c}" style="margin: 0px; padding: 0px;">\n          <a class="lang-item ${r}" href="javascript:void(0)"\n          onclick="highlightLang(); persistence_remove('allFrams'); persistence_remove('codestyle'); persistence_remove('framework'); persistence('language', ${c}); getFramsByLang(${c}); getAllSolns('','','${c}','',''); clear_code_screen();">\n          <img src="${n}/${m}" height="20px">&nbsp;${d}</a></li>`,i||(l+=`<a onclick="default_lang(${c},'${d}');" class="btn btn-outline-secondary"> ${d}</a>`)}$("#language_").html(a),i||$("#language_select_modal").html(`<div class="btn-list">${l}</div>`),s&&scrollElementIntoView(`lang-item-${s}`)}else $("#language_").html("<li>No Languages</li>"),$("#language_select_modal").html("Unable to load languages")}))}}function default_lang(e,t){persistence("language",e),highlightLang(),successToast(`We will show you more of ${t}`),hidewelcome(),getAllSolns("","","","","")}function highlightLang(){$(".lang_").on("click",".lang-item",(function(){$(".lang_ .lang-item").removeClass("active-two"),$(this).addClass("active-two")}))}function scrollElementIntoView(e){setTimeout((()=>{const t=e.charAt(e.length-1),n=document.getElementById(e);"0"!=t&&n.scrollIntoView({block:"nearest"})}),100)}function filterFramsByLang(){const e=currentLoc();if(e&&e.allFrams){const t=e.allFrams,n=parseInt($("#language_sel").val().trim());let o='<option value="">--Select One</option><option value="0">No Framework</option>';if(n>=0){const e=[];for(let o=0;o<t.length;o++)n==t[o].language_id&&e.push(t[o]);if(e.length>0){for(let t=0;t<e.length;t++)o+=`<option value="${e[t].uid}">${e[t].name}</option>`;$("#framework_sel").html(o)}else $("#framework_sel").html(o)}else{for(let e=0;e<t.length;e++)o+=`<option value="${t[e].uid}">${t[e].name}</option>`;$("#framework_sel").html(o)}}}function persistFram(){persistence("framework",parseInt($("#sel_framework").val()))}function persistCodestyle(){persistence("codestyle",parseInt($("#sel_codestyle").val()))}function getAllFrams(){const e=currentLoc();if(e&&e.allFrams){const t=e.allFrams;let n="<select class='fancy-select form-control' id = 'sel_framework' onchange='persistFram();  clear_code_screen();'>\n    ";if(t.length>0){let o;e&&NaN!=parseInt(e.framework)&&(o=e.framework);const s=t.length;for(let e=0;e<s;e++){const s=t[e].uid,a=t[e].name;n+=s==o?`<option SELECTED value="${s}">${a}</option>`:`<option value="${s}">${a}</option>`}$("#framework-dropdown").html(`${n}</select>`)}else n="\n      <select class='fancy-select form-control' id = 'sel_framework' onchange=\"persistFram(); getAllSolns('','','','','');\">\n        <option value = \"\">All Frameworks</option>\n        <option value = \"0\">No Framework</option>\n      </select>\n      ",$("#framework-dropdown").html(n)}else{crudaction({},`/frameworks${`?where_=${"f.status = 1"}&orderby=${"f.name"}&dir=${"ASC"}&offset=${0}&rpp=${500}`}`,"GET",(t=>{let n="<select class='fancy-select form-control' id = 'sel_framework' onchange=\"persistFram(); getAllSolns('','','','',''); clear_code_screen();\">\n    ";if(t&&t.data&&t.data.length>0){const{data:o}=t,s=o.findIndex((e=>0==e.uid));let a;-1!==s&&o.splice(s,1),o.unshift({description:"",icon:"",language:"",language_id:0,name:"No Framework",status:1,uid:0}),o.unshift({description:"",icon:"",language:"",language_id:0,name:"All Frameworks",status:1,uid:""}),e&&NaN!=parseInt(e.framework)&&(a=e.framework);const l=o.length;for(let e=0;e<l;e++){const t=o[e].uid,s=o[e].name;n+=t==a?`<option SELECTED value="${t}">${s}</option>`:`<option value="${t}">${s}</option>`}$("#framework-dropdown").html(`${n}</select>`),persistence("allFrams",o)}else n="\n        <select class='fancy-select form-control' id = 'sel_framework' onchange=\"persistFram(); getAllSolns('','','','',''); clear_code_screen();\">\n          <option value = \"\">All Frameworks</option>\n          <option value = \"0\">No Framework</option>\n        </select>\n      ",$("#framework-dropdown").html(n)}))}}function getFramsByLang(e){const t=currentLoc();if(t&&t.allFrams){const e=t.allFrams;let n="<select class='fancy-select form-control' id = 'sel_framework' onchange=\"persistFram(); getAllSolns('','','','',''); clear_code_screen();\">\n    ";if(e.length>0){let o;t&&NaN!=parseInt(t.framework)&&(o=t.framework);const s=e.length;for(let t=0;t<s;t++){const s=e[t].uid,a=e[t].name;n+=s==o?`<option SELECTED value="${s}">${a}</option>`:`<option value="${s}">${a}</option>`}$("#framework-dropdown").html(`${n}</select>`)}else n="\n      <select class='fancy-select form-control' id = 'sel_framework' onchange=\"persistFram(); getAllSolns('','','','',''); clear_code_screen();\">\n        <option value = \"\">All Frameworks</option>\n        <option value = \"0\">No Framework</option>\n      </select>\n      ",$("#framework-dropdown").html(n)}else{crudaction({},`/frameworks${`?language_id=${e}&where_=${"f.status = 1"}&orderby=${"f.name"}&dir=${"ASC"}&offset=${0}&rpp=${100}`}`,"GET",(e=>{let n="<select class='fancy-select form-control' id = 'sel_framework' onchange=\"persistFram(); getAllSolns('','','','',''); clear_code_screen();\">\n    ";if(e&&e.data&&e.data.length>0){const{data:o}=e,s=o.findIndex((e=>0==e.uid));let a;-1!==s&&o.splice(s,1),o.unshift({description:"",icon:"",language:"",language_id:0,name:"No Framework",status:1,uid:0}),o.unshift({description:"",icon:"",language:"",language_id:0,name:"All Frameworks",status:1,uid:""}),t&&NaN!=parseInt(t.framework)&&(a=t.framework);const l=o.length;for(let e=0;e<l;e++){const t=o[e].uid,s=o[e].name;n+=t==a?`<option SELECTED value="${t}">${s}</option>`:`<option value="${t}">${s}</option>`}$("#framework-dropdown").html(`${n}</select>`)}else n="\n      <select class='fancy-select form-control' id = 'sel_framework' onchange=\"persistFram(); getAllSolns('','','','',''); clear_code_screen();\">\n        <option value = \"\">All Frameworks</option>\n        <option value = \"0\">No Framework</option>\n      </select>\n      ",$("#framework-dropdown").html(n)}))}}function codesnippetValidate(){const e=$("#func_sel").val(),t=$("#subfunc_sel").val(),n=$("#language_sel").val(),o=$("#language_sel option:selected").text(),s=$("#framework_sel").val(),a=$("#sel_lang_impl").val(),l=$("#sel_user_impl").val();let i=$("#codeimpl_title").val().trim();const r=$("#code_input").val().trim(),c=$("#file_extension").val().trim(),d="instructions_input",m=myeditors2&&myeditors2[d]?myeditors2[d].getData().trim():$(`#${d}`).val().trim();let u;const p=currentLoc();if(!p)return void gotourl("login");{const{user:e}=p;u=e.uid}let f=subfunErr=langErr=framErr=langImplErr=userImplErr=titleErr=codeErr=fileExtErr=instrErr=!0;if(""==e?printError("funErr","Please select function"):(printError("funErr",""),f=!1),""==t?printError("subfunErr","Please select subfunction"):(printError("subfunErr",""),subfunErr=!1),""==n?printError("langErr","Please select language"):(printError("langErr",""),langErr=!1),""==s?printError("framErr","Please select framework"):(printError("framErr",""),framErr=!1),""==a?printError("langImplErr","Please select language implementation type"):(printError("langImplErr",""),langImplErr=!1),""==l?printError("userImplErr","Please select your implementation type"):(printError("userImplErr",""),userImplErr=!1),""==i)printError("titleErr","Please add a user friendly code title");else{!1===/^[a-zA-Z0-9.',?@&#-\s]+$/.test(i)?printError("titleErr","Title should not contain some special characters like /, <, and >. We recommend using aplhabets for the title."):(i+=` in ${o}`,printError("titleErr",""),titleErr=!1)}if(""==r?printError("codeErr","Please enter your code"):(printError("codeErr",""),codeErr=!1),""==c?printError("fileExtErr","File extension used with code added is required"):(printError("fileExtErr",""),fileExtErr=!1),1==(f||subfunErr||langErr||framErr||langImplErr||userImplErr||titleErr||codeErr||fileExtErr))return!1;data={func_id:e,subfunc_id:t,language_id:n,framework_id:s,lang_impl_type_id:a,user_impl_type_id:l,title:i,row_code:r,file_extension:c,instructions:m,added_by:u},saveCodeSnippet(data)}function saveCodeSnippet(e){disabledBtn("#addEditCodeBtn");const t=$("#code_edit_id").val();let n="POST",o="/add-codesnippet",s=e;t>0&&(n="PUT",o="/edit-codesnippet",e.codesnippet_id=t,s=e),crudaction(s,o,n,(e=>{if(e&&submitBtn("#addEditCodeBtn","codesnippetValidate();","Click to submit"),!1===e.success){const{message:t}=e;errorToast(t)}else if(!0===e.success){const{message:t}=e;if(successToast(t),document.getElementById("func_sel").selectedIndex=0,document.getElementById("subfunc_sel").selectedIndex=0,document.getElementById("language_sel").selectedIndex=0,document.getElementById("framework_sel").selectedIndex=0,document.getElementById("sel_lang_impl").selectedIndex=0,document.getElementById("sel_user_impl").selectedIndex=0,$("#codeimpl_title").val(""),$("#code_input").val(""),$("#file_extension").val(""),myeditors2&&myeditors2.instructions_input?myeditors2.instructions_input?.setData("")?.trim():$("#instructions_input")?.val(""),"PUT"==n){const e=currentLoc(),t=e&&e.gotourl?e.gotourl:"index";setTimeout((()=>{gotourl(t)}),2500)}}}))}function getNavLink(e,t="qs="){const n=getCurrentHost();let o="";const{origin:s}=getCurrentUrl();return o="localhost"==n?`${s}/zidi-app/${e}?${t}`:`${s}/${e}?${t}`,$("#nav_link").val(o),o}function contributeCodeNav(){const e=getNavLink("code-add-edit","cid=");$("#contribute-code").html(`\n  <a class="a-override" onclick='persistence("gotourl", "${e}");' href="${e}" class="text-blue font-weight-bold text-center"><i class="fe fe-edit"></i>&nbsp;Contribute New Code</a>\n  `)}function search_codeSnippet(){setTimeout((()=>{localStorage.searching=0}),1e3);const e=$("#search_box").val().trim();let t=0;if(localStorage.searching?t=localStorage.searching:localStorage.searching=1,e){const n=`?search_=${e}&status=1&offset=0&rpp=7&orderby=uid&dir=DESC`;"0"===t&&(localStorage.searching=1,crudaction({},`/search-codesnippet${n}`,"GET",(e=>{if(console.log(e),persistence("searched_solns",e.data),e.success){const t=e.search_totals,{data:n}=e;if(t>0){let e="<table class='table table-light childClass stack-top shadow-lg p-3 mb-5 bg-white table-condensed'>";for(let t=0;t<n.length;t++)e+=`<tr><td><a href="javascript:void(0)"  class='pointer a-override a-alt' \n            onclick="select_code(${n[t].uid}, '${n[t].title}')">\n            <span class="font-16 text-bold">${n[t].title} </span> <br/>\n            Contributed By: <i> ${n[t].fullname} </i> on <i> ${n[t].added_date} </i></a></td></tr>`;e+="</table>",$("#code_results").slideDown("fast"),$("#code_results").html(e)}else $("#code_results").slideDown("fast"),$("#code_results").html('<div class="childClass stack-top card">\n            <span class="text-center search-dropdown-noresults">No results</span>\n          </div>')}else $("#code_results").slideDown("fast"),$("#code_results").html('<div class="childClass stack-top card">\n          <span class="text-center search-dropdown-noresults">No results</span>\n          </div>');localStorage.searching=0})))}else $("#code_results").fadeOut("fast")}function select_code(e,t){$("#search_box").val(t),appendCodeUrl(e,"search"),load_codesnippetById(e),$("#code_results").fadeOut("fast")}function codeStyles(){const e=[{uid:1,name:"Plain Code"},{uid:2,name:"Function Based"},{uid:3,name:"Class Based"},{uid:4,name:"API Based"}],t=currentLoc();let n;t&&t.codestyle>0&&(n=t.codestyle);let o="<select class='fancy-select form-control' id = 'sel_codestyle' onchange=\"persistCodestyle(); getAllSolns('','','','','');\"><option value = \"0\" > All Code Styles</option>";for(let t=0;t<e.length>0;t++){const s=e[t].uid,a=e[t].name;o+=s===n?`<option SELECTED value="${s}">${a}</option>`:`<option value="${s}">${a}</option>`}$("#codestyle-dropdown").html(`${o}<select`)}const tagsToReplace={"&":"&amp;","<":"&lt;",">":"&gt;"};function replaceTag(e){return tagsToReplace[e]||e}function safe_tags_replace(e){return e.replace(/[&<>]/g,replaceTag)}function loadCodesnippetsLink(e=""){$(".all-solns").show(),spinner("#available-solns","spinner-border-sm","d-flex justify-content-center"),$(".related-soln-container").hide(),$("#links-title").html("All Solutions");const t=currentLoc();if("all_back"==e)if(t&&t.all_solns&&t.all_solns.length){if(t.all_solns.length>0){const e=t.all_solns;let n,o,s,a,l="";for(let i=0;i<e.length;i++){n=e[i].user_implementation_type,o=e[i].language_name,s=e[i].framework,language_id=e[i].language_id,a=e[i].uid;const{title:r}=e[i];s=0==e[i].framework_id?"":` with ${s} framework`;let c="";c=(t&&t.code_sel&&t.code_sel.uid?t.code_sel.uid:"")==a?"active-two":"",l+=`<a href="javascript:void(0)"\n                onclick="appendCodeUrl('${a}', ''); load_codesnippetById('${a}');" class="list-group-item ${c} list-group-item-action">\n            <span class="badge badge-secondary"><i class="fe fe-arrow-up-left"></i></span>\n            ${r} - (<i>${o} ${n} ${s}</i>) </a>`}$("#available-solns").html(l)}else $("#available-solns").html('<p class="list-group-item list-group-item-action">No record found</p>'),persistence_remove("all_solns")}else{crudaction({},`/codesnippets${`?status=${1}&orderby=${"uid"}&dir=${"DESC"}&func_id=${""}&subfunc_id=${""}&language_id=${""}&framework_id=${""}&user_impl_type_id=${""}&offset=${0}&rpp=${25}`}`,"GET",(e=>{if(e.all_totals>0){const{data:t}=e;let n,o,s,a,l="";for(let e=0;e<t.length;e++){n=t[e].user_implementation_type,o=t[e].language_name,s=t[e].framework,language_id=t[e].language_id,a=t[e].uid;const{title:i}=t[e];s=0==t[e].framework_id?"":` with ${s} framework`,l+=`<a href="javascript:void(0)"\n                onclick="appendCodeUrl('${a}', ''); load_codesnippetById('${a}');" class="list-group-item list-group-item-action">\n            <span class="badge badge-secondary"><i class="fe fe-arrow-up-left"></i></span>\n            ${i} - (<i>${o} ${n} ${s}</i>) </a>`}$("#available-solns").html(l),persistence("all_solns",e.data)}else $("#available-solns").html('<p class="list-group-item list-group-item-action">No record found</p>'),persistence_remove("all_solns")}))}else{const e=25,n=0,o=t&&t.func?t.func:"",s=t&&t.subfunc?t.subfunc:"",a=t&&t.language?t.language:"",l=t&&t.codestyle?t.codestyle:"";let i=t.framework;i=Number.isFinite(i)?i:"";crudaction({},`/codesnippets${`?status=${1}&orderby=${"uid"}&dir=${"DESC"}&func_id=${o}&subfunc_id=${s}&language_id=${a}&framework_id=${i}&user_impl_type_id=${l}&offset=${n}&rpp=${e}`}`,"GET",(e=>{if(e.all_totals>0){const{data:t}=e;let n,o,s,a,l="";for(let e=0;e<t.length;e++){n=t[e].user_implementation_type,o=t[e].language_name,s=t[e].framework,language_id=t[e].language_id,a=t[e].uid;const{title:i}=t[e];s=0==t[e].framework_id?"":` with ${s} framework`,l+=`<a href="javascript:void(0)"\n      onclick="appendCodeUrl('${a}', ''); load_codesnippetById('${a}');" class="list-group-item list-group-item-action">\n<span class="badge badge-secondary"><i class="fe fe-arrow-up-left"></i></span>\n      ${i} - (<i>${o} ${n} ${s}</i>) </a>`}$("#available-solns").html(l),persistence("all_solns",e.data)}else $("#available-solns").html('<p class="list-group-item list-group-item-action">No record found</p>'),persistence_remove("all_solns")}))}}function getRelatedSolns(e,t,n,o){$(".all-solns").hide(),$(".related-soln-container").show(),spinner("#related-solns","spinner-border-sm","d-flex justify-content-center");crudaction({},`/related-solns${`?func_id=${t}&subfunc_id=${n}&codesnippet_id=${e}&status=1&language_id=${o}`}`,"GET",(t=>{if(t&&t.data){const{data:n}=t,s=n.length;let a="";if(1==s?$("#related-soln-title").html("Related Solution"):$("#related-soln-title").html("Related Solutions"),$("#all-solns-nav").html('\n        <a href="javascript:void(0)" onclick="back_to_all();" title="Back to All" class="text-blue font-weight-bold text-center"><span class="badge badge-secondary">All <i class="fe fe-corner-up-left"></i></span></a>\n        '),s>0){for(let t=0;t<s;t++){user_implementation_type=n[t].user_implementation_type,language_name=n[t].language_name,framework=n[t].framework,o=n[t].language_id,e=n[t].uid;const{title:s}=n[t];0==n[t].framework_id?framework="":framework=` with ${framework} framework`,a+=`<a href="javascript:void(0)"  \n          onclick="appendCodeUrl('${e}', 'related-solns'); load_codesnippetById('${e}');" class="list-group-item list-group-item-action">\n  <span class="badge badge-secondary"><i class="fe fe-arrow-up-left"></i></span>\n          ${s} - (<i>${language_name} ${user_implementation_type} ${framework}</i>) </a>`}$("#related-solns").html(a),persistence("related_solns",n)}else $("#related-solns").html('<p class="list-group-item list-group-item-action">No related solution(s)</p>')}else console.log(t)}))}function getAllSolns(e,t,n,o,s,a=""){a?(persistence_remove("language"),persistence_remove("func"),persistence_remove("subfunc"),persistence_remove("framework"),persistence_remove("codestyle")):(n||(n=persistence_read("language")),e||(e=persistence_read("func")),t||(t=persistence_read("subfunc")),o||(o=persistence_read("framework")),s||(s=persistence_read("codestyle"))),$("#codeareaid").css("display","none"),$("#search_results_all").css("display","block");crudaction({},`/codesnippets${`?status=1&orderby=uid&dir=DESC&func_id=${e}&subfunc_id=${t}&language_id=${n}&framework_id=${o}&user_impl_type_id=${s}&offset=0&rpp=25&search_=${a}`}`,"GET",(e=>{if(e.all_totals>0){const{data:t}=e;let n,o,s,a,l="";for(let e=0;e<t.length;e++){n=t[e].user_implementation_type,o=t[e].language_name,s=t[e].framework,language_id=t[e].language_id,a=t[e].uid;const{title:i}=t[e],r=t[e].fun_name,c=t[e].subfun_name;s=0==t[e].framework_id?"":` with ${s} framework`,l+=`<a href="javascript:void(0);" onclick="appendCodeUrl('${a}', ''); load_codesnippetById('${a}');" class="list-group-item list-group-item-action"><table class="w-100 font-12"><tr><td colspan="2"><span class="a-override font-16 font-weight-bold"><i class="fa fa-angle-double-right a-override"></i> ${i} ${s}</span></td></tr><tr><td>${r} â€º ${c} </td><td>${n}<i> implementation</i></td></tr></table> </a>                            `}$("#search_results_all").html(l),persistence("all_solns",t)}else $("#search_results_all").html('<p class="list-group-item font-22  text-black-50 font-italic list-group-item-action"><i class="fe fe-slash"></i> <span>No solutions found in the selected language</span></p>')}))}function back_to_all(){$("#codeareaid").css("display","none"),$("#search_results_all").fadeIn("fast"),reset_code_view("Select a solution below or click a functionality"),scrollCommentSection("codeimp-title")}function reset_code_view(e="",t=""){$("#codeimp-title").html(`<h4 class="text-left">${e}</h4>`),$("#imptype-and-contributor").html(t),$("#edit-code").html(""),configureAceEditor()}function codeDetails(){const e=currentLoc();$("#code-composition").html(`\n  <input type="hidden" id="copy-status" value="yes"/>\n  <li class="dropdown" id="account-0">\n    <div\n      class="nav-link dropdown-toggle bg-white btn text-black"\n      style="border: none; background-color: #edeff3 !important;"\n      data-toggle="dropdown"\n      aria-expanded="false"\n    >\n    <i class="fe fe-code"></i>&nbsp;Code Details\n    </div>\n    <div class="dropdown-menu" id="code-composition">\n    <div class="dropdown-item code-comp text-center card">\n    Function<i class="fe fe-arrow-down"></i><span class="text-bold">${e&&e.code_sel&&e.code_sel.fun_name?e.code_sel.fun_name:""}</span><br>\n    Subfunction<i class="fe fe-arrow-down"></i><span class="text-bold">${e&&e.code_sel&&e.code_sel.subfun_name?e.code_sel.subfun_name:""}</span><br>\n    Language<i class="fe fe-arrow-down"></i><span class="text-bold">${e&&e.code_sel&&e.code_sel.language_name?e.code_sel.language_name:""}</span><br>\n    Framework<i class="fe fe-arrow-down"></i><span class="text-bold">${e&&e.code_sel&&e.code_sel.framework_name?e.code_sel.framework_name:""}</span><br>\n    Codestyle<i class="fe fe-arrow-down"></i><span class="text-bold">${e&&e.code_sel&&e.code_sel.codestyle_name?e.code_sel.codestyle_name:""}</span>\n    </div>\n    </div>\n  </li>`)}function appendCodeUrl(e,t=""){const n=currentLoc(),o=getCurrentUrl(),{host:s}=o,a=n&&n.dom_sect?`#${n.dom_sect}`:"";let l="https://zidiapp.com";"localhost"==s&&(l="http://localhost/zidi-app");let i="";if("search"==t){if(n&&n.searched_solns&&n.searched_solns.length>0){const{searched_solns:t}=n,o=t.length;for(let n=0;n<o;n++)t[n].uid==e&&(i=t[n].title)}}else if("related-solns"==t){if(n&&n.related_solns&&n.related_solns.length>0){const{related_solns:t}=n,o=t.length;for(let n=0;n<o;n++)t[n].uid==e&&(i=t[n].title)}}else if(n&&n.all_solns&&n.all_solns.length>0){const{all_solns:t}=n,o=t.length;for(let n=0;n<o;n++)t[n].uid==e&&(i=t[n].title)}const r=`${l}/solutions/${e}/${hyphenateTitle(i)}-${a}`;goTo(r),persistence("gotourl",r)}function persistUrl(){const e=getCurrentUrl()&&getCurrentUrl().href?getCurrentUrl().href:"";persistence("gotourl",e)}function copyCodesnippet(){if("yes"==$("#copy-status").val()){const e=ace.edit("editor").getValue();(e.match(/[a-zA-Z0-9}{]/g)?e.match(/[a-zA-Z0-9}{]/g).length:0)>0&&(navigator.clipboard.writeText(e),successToast("Code copied to clipboard"))}else errorToast("No valid code to copy")}function shareCodesnippet(){if("yes"==$("#copy-status").val()){const e=ace.edit("editor").getValue(),t=getCurrentUrl().href;(e.match(/[a-zA-Z0-9}{]/g)?e.match(/[a-zA-Z0-9}{]/g).length:0)>0&&(navigator.clipboard.writeText(t),successToast("Share link copied to clipboard"))}else errorToast("No valid code to share")}function clear_code_screen(){$("#codeimp-title").html("<h4 class='text-left'>Select an Implementation from the right column</h4>"),$("#imptype-and-contributor").html(""),$("#edit-code").html(""),$("#code-instructions").html(""),$("#add-comment").html("");ace.edit("editor").setValue("")}function load_codesnippetById(e){$("#search_results_all").css("display","none"),$("#codeareaid").fadeIn("fast"),spinner("#imptype-and-contributor","spinner-border-sm"),spinner("#availables-solns","spinner-border-sm");query=`?codesnippet_id=${e}&status=1`,crudaction({},`/codesnippet${query}`,"GET",(t=>{let n="",o="";const s=currentLoc();if(t&&t.data&&t.data.uid&&t.data.uid==e){const{data:e}=t,{uid:a,func_id:l,subfunc_id:i,language_id:r,framework_id:c,codestyle_id:d,language_name:m,row_code:u,title:p,instructions:f,added_by:g,provider:h,fullname:v,username:_,total_comments:b}=e;n=p,$("#codeimp-title").html(`<h4 class='text-left'>${n}</h4>`);let y="";if("Local"===h||"Google"===h?y=v:"Github"==h?y=_:"Facebook"==h?y+=y:"Twitter"==h&&(y=v),o=`<i class='fe fe-globe'></i> Contributed by: <a class="a-override a-alt bold" title="View contributor's profile" href="javascript:void(0)">${safe_tags_replace(y)}</a>`,$("#imptype-and-contributor").html(o),s&&s.user&&s.user.uid){const e=s.user.uid,{isAdmin:t}=s.user;if(e===g||"true"===t){const e=getNavLink("code-add-edit",`cid=${a}`);$("#edit-code").html(`|<a class="a-override" onclick="persistUrl()" href="${e}" class="text-blue font-weight-bold text-center"><i class="fe fe-edit"></i>&nbsp;Edit</a>`)}else $("#edit-code").html("")}else $("#edit-code").html("");if($("#codesnippet_").val(u),configureAceEditor(m),$("#inner-list-dom-id").val(`#fun${l}`),$("#inner-list-dom-class").val(`.subfunc${l}`),f?$("#code-instructions").html(f):$("#code-instructions").html("No Instructions"),s&&s.user&&s.user.uid)$("#add-comment").html('<button class="btn pointer  font-weight-bold text-center" onclick="parseEditorId(\'#fcbody0\', 0, \'add comment\');" ><i class="fa fa-comment-o"></i> Leave a Comment</button>');else{$("#add-comment").html("<button class=\"btn pointer cpointer font-weight-bold text-center\" onclick=\"showModal('#loginOrRegisterModal'); persistence('dom_sect','add comment');\"  ><i class=\"fa fa-comment-o\"></i> Leave a Comment</button>");const e=getNavLink("login"),t=getNavLink("register");$("#modal-title").html(`Please <a class="cpointer modal-nav" href="${e}">Login</a> or <a class="cpointer modal-nav" href="${t}">Sign up</a> to add a comment`)}persistence("code_sel",e),persistence("func",l),persistence("subfunc",i),persistence("language",r),persistence("language_name",m),persistence("framework",c),persistence("codestyle",d),getFramsByLang(r),codeStyles(),functions_load(),load_languages(),codeDetails(),getRelatedSolns(a,l,i,r);const w=1==b?`${b} comment`:`${b} comments`;$("#total-comments").html(w),persistence("total_comments",b),getCommentsByCodesnippetId()}else getAllFrams(),codeStyles(),functions_load(),load_languages(),$("#codeimp-title").html(n),$("#imptype-and-contributor").html(o),$("#edit-code").html(""),configureAceEditor()})),document.getElementById("main_content").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}function scrollCommentSection(e){document.getElementById(e).scrollIntoView({block:"center"})}function scrolltoview(e){document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}function toggleEditorTheme(){const e=$("#copy-status").val(),t=currentLoc(),{editorTheme:n}=t;"monokai"==n?persistence("editorTheme","eclipse"):persistence("editorTheme","monokai");const o=t&&t.code_sel&&t.code_sel.language_name?t.code_sel.language_name:"";"yes"==e?configureAceEditor(o):change_theme()}function change_theme(){const e=currentLoc(),{editorTheme:t}=e;"monokai"==t?($("#editor").removeClass("light-screen"),$("#editor").addClass("dark-screen")):($("#editor").removeClass("dark-screen"),$("#editor").addClass("light-screen"))}function configureAceEditor(e=""){const t=currentLoc(),{editorTheme:n}=t;let o=e;"monokai"==n?($("#editor").removeClass("light-screen"),$("#editor").addClass("dark-screen")):($("#editor").removeClass("dark-screen"),$("#editor").addClass("light-screen"));const s=ace.edit("editor");s.setValue("Code Loading....");const a=$("#codesnippet_").val(),l=(a.match(/\n/g)||[]).length;({init(){s.setTheme(`ace/theme/${n}`),e&&(o=e.toLowerCase(),"nodejs"==o&&(o="javascript"),"c#"==o&&(o="csharp"),"c"!=o&&"c++"!=o||(o="c_cpp")),s.session.setMode(`ace/mode/${o}`),s.setOptions({fontSize:"11pt",enableBasicAutocompletion:!0,autoScrollEditorIntoView:!0,copyWithEmptySelection:!0,maxLines:l+3}),s.setValue(a),s.clearSelection(),"java"===o&&setTimeout((()=>{formatCode(o)}),50)}}).init()}function formatCode(e){const t=currentLoc(),{editorTheme:n}=t,o=ace.edit("editor");({init(){o.setTheme(`ace/theme/${n}`),o.session.setMode(`ace/mode/${e}`);o.setValue(js_beautify(o.getValue(),{fontSize:"12pt",enableBasicAutocompletion:!0,autoScrollEditorIntoView:!0,copyWithEmptySelection:!0})),o.clearSelection()}}).init()}function langAddEdit(){const e=$("#language_sel").val();persistence("langAddEdit",e)}function highlightSelCodeParams(e,t,n,o,s){const a=$(`${`#func-item${e}`}`);a&&a.toggleClass("active")}function populateProfile(){const e=currentLoc();if(e&&e.user){const{user:t}=e;let n="";n="Local"===t.provider&&t.photo?`<img src='${server_}/user/${t.photo}' style='width: 100px; height: 100px; border-radius: 50%;' />`:"Local"!==t.provider||t.photo?`<img src='${t.photo}' referrerpolicy="no-referrer" style='width: 100px; height: 100px; border-radius: 50%;' />`:`<span class="d-flex justify-content-center align-items-center font-24" style='width: 100px; height: 100px; font-weight: bold; border-radius: 50%; background-color: purple; color: white;'>${t.fullname[0]}</span>`,$(".profile-photo-view").html(n),$("#profile-info").html(`<table class="table table-bordered">\n        <tr>\n          <td><b>Username</b></td>\n          <td>${t.username?t.username:"----------"}</td>\n        </tr>\n        <tr>\n          <td><b>Email</b></td>\n          <td>${t.email?t.email:"------------"}</td>\n        </tr>\n        <tr>\n          <td><b>Fullname</b></td>\n          <td>${t.fullname?safe_tags_replace(t.fullname):"---------"}</td>\n        </tr>\n        <tr>\n          <td><b>Country</b></td>\n          <td>${t.country?t.country:"----------"}</td>\n        </tr>\n        <tr>\n          <td><b>Contribution Rate</b></td>\n          <td>50%</td>\n        </tr>\n      </table>`)}}function title_update(e){$("#codeimp-title").html(`<h4>${e}</h4>`)}function setTargetPage(e){persistence("cur_page",parseInt(e)),getCommentsByCodesnippetId()}function getCommentsByCodesnippetId(){const e=currentLoc();let t,n,o;if(!e||!e.code_sel)return;t=e.code_sel.uid,e&&e.user&&e.user.uid&&(n=e.user.uid),o=e&&e.cur_page?e.cur_page:1;const s=o-1;let a=s;s>0&&(a=5*s);crudaction({},`/comments-by-codeid${`?where_=${`cmt.code_snippet_id = ${t} AND cmt.replying_to = 0 AND cmt.status = 1`}&orderby=cmt.uid&dir=DESC&offset=${a}&rpp=5`}`,"GET",(t=>{$("#outer-c").html("<i>Loading...</i>");let s,a="",l=t&&t.total_records?t.total_records:0;if(t&&t.data&&t.data.length>0){const{data:o}=t,s=o.length;l=t.total_records;for(let t=0;t<s;t++){const{author_name:s}=o[t],l=o[t].author_name[0],i=momentDatetime(reformatDate(o[t].added_date)),{tag_name:r}=o[t],{tag_icon:c}=o[t],{tag_color:d}=o[t],{comment_body:m}=o[t],u=o[t].total_replies,{votes:p}=o[t],f=commentReplyId=o[t].uid,{replying_to:g}=o[t],{author_id:h}=o[t];let v='<a class="a-alt"><i class="fe fe-corner-up-left"></i> 0 Replies </a>';0==u&&(v=`<a class="a-alt"><i class="fe fe-corner-up-left"></i> ${u} Replies </a>`),1==u&&(v=`<a class="a-override" href="javascript:void(0)" onclick="getCommentReplies(${commentReplyId}, ${u})"><i class="fe fe-corner-up-left"></i> ${u} Reply </a>`),u>1&&(v=`<a class="a-override" href="javascript:void(0)" onclick="getCommentReplies(${commentReplyId}, ${u})"><i class="fe fe-corner-up-left"></i> ${u} Replies </a>`);let _="";if(e&&e.user&&e.user.uid?e.user.uid:"")_=`<a\n              title="reply"\n              class="font-weight-bold btn-sm btn-outline-dark"\n              href="javascript:void(0)"\n              onclick="parseEditorId('#fcbody${f}', '${f}', 'reply');"\n            >\n              <i class="fe fe-message-square"></i>\n            </a>`;else{_='<a\n            title="reply"\n            class="font-weight-bold btn-sm btn-outline-dark"\n            href="javascript:void(0)"\n            onclick="showModal(\'#loginOrRegisterModal\')"\n          >\n            <i class="fe fe-message-square"></i> \n          </a>';const e=getNavLink("login"),t=getNavLink("register");$("#modal-title").html(`Please <a class="cpointer modal-nav" href="${e}">Login</a> or <a class="cpointer modal-nav" href="${t}">Sign up</a> to reply a comment`)}let b="";b=h===n?`\n            <div class="col-sm-3" id="load-cmt${f}">\n            ${v}\n            </div>\n            <div class="col-sm-5">\n                ${_}\n                <a onclick="upvoteComment(${f})" id = "upvote-comment-${f}" title="Upvote" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><i class="icon-like"></i></a>\n                <span id="comment${f}-votes"> ${p} </span>\n                <a onclick="downvoteComment(${f})" id = "downvote-comment-${f}" title="Downvote" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><i class="icon-dislike"></i></a>\n            </div>\n            <div class="col-sm-4">\n                <a onclick="parseEditorId('#fcbody${f}', '${f}', 'edit comment', ${g});" title="edit comment" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><span><i class="fe fe-edit"></i></span></a>\n                <a onclick="deleteComment(${f} ,${g})" title="delete comment" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><span><i class="fe fe-trash-2"></i></span></a>\n            </div>\n          `:`\n          <div class="equalbox" id="load-cmt${f}">\n            ${v}\n          </div>\n          <div class="equalbox">\n            <a class="a-override a-alt"><i class="icon-like"></i> <span id="comment${f}-votes">${p} </span></a>\n          </div>\n          <div class="equalbox pull-right">\n            ${_}\n            <a onclick="upvoteComment(${f})" id = "upvote-comment-${f}" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><i class="icon-like"></i></a>\n            <a onclick="downvoteComment(${f})" id = "downvote-comment-${f}" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><i class="icon-dislike"></i></a>\n          </div>\n          `,a+=`<div class="comment_box">\n          <div class="row">\n            <div class="col-sm-1 icon_"><div class="hicon ${l.toLowerCase()}">${l}</div></div>\n            <div class="col-sm-11 bod_">\n                <div class="row chead">\n                    <div class="col-sm-9 cwho">\n                        ${s}  <span class="ctime text-muted font-12"><span class="status-icon bg-gray"></span> ${i}</span>\n                    </div>\n                    <div class="col-sm-3 lab_">\n                        <label class="font-12 font-weight-bold ${d}"><i class="${c}"></i> ${r}</label>\n                    </div>\n                </div>\n                <div class="row cbody">\n                    <div class="col-sm-12" id="cdisply${f}">\n                       ${m}\n                    </div>\n                </div>\n            \n                <div class="row cfoot">\n                   ${b}\n                    <div class="mt-2 col-sm-12">\n                        <div class="comment_area hide cform" id="cform${f}">\n                          <div class="row">\n                           \x3c!--\n                              <div class="col-sm-1" id="replyHicon${f}">\n\n                              </div>\n                            --\x3e\n                              <input type="hidden" id="comment-edit-id${f}" value="add comment">\n                              <input type="hidden" id="cke-init-${f}" value="">\n                              <div class="col-sm-12"><textarea id="fcbody${f}" class="fcbody form-control" placeholder="Leave a comment..."></textarea></div>\n                              <div class="col-sm-12 error" id="comment${f}Err"></div>\n                          </div>\n                          <div class="row mt-2">\n                            <div class="col-sm-1"></div>\n                            <div class="col-sm-9"><button onclick="closeForm('#cform${f}')" class="btn btn-success btn-sm"><i class=""></i> Cancel</button></div>\n                            <div class="col-sm-2"><button onclick="saveComment('fcbody${f}', ${f})" class="btn btn-success btn-sm"><i class=""></i> Post</button></div>\n                          </div>\n                      </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div id="inner-box${commentReplyId}">\n        </div>\n      </div>\n    `}$("#outer-c").html(a),persistence("comments",o)}else $("#outer-c").html(a);s=1==l?`${l} comment`:`${l} comments`,$("#total-comments").html(s);const i=Paging(o,5,l,"myClass","myDisableClass");$("#pagingDiv").html(i)}))}function getCommentReplies(e){$(`#load-cmt${e}`).html("<i>Loading...</i>");const t=currentLoc();let n;t&&t.user&&t.user.uid&&(n=t.user.uid);let o;if(t&&t.code_sel){o=`?where_=${`cmt.code_snippet_id=${t.code_sel.uid} AND cmt.replying_to=${e} AND cmt.status=1`}&offset=0&rpp=10`;crudaction({},`/comments-by-codeid${o}`,"GET",(o=>{let s="",a='<a class="a-alt"><i class="fe fe-corner-up-left"></i> 0 Replies </a>';if(o&&o.data&&o.data.length>0){$(`#load-cmt${e}`).html("");const{data:l}=o,i=l.length;let r;for(let e=0;e<i;e++){const{author_name:o}=l[e],i=l[e].author_name[0],c=momentDatetime(reformatDate(l[e].added_date)),{tag_name:d}=l[e],{tag_icon:m}=l[e],{tag_color:u}=l[e],{comment_body:p}=l[e],f=l[e].total_replies,{votes:g}=l[e],h=l[e].uid;r=l[e].replying_to;const{author_id:v}=l[e];1==f&&(a=`<a class="a-override" href="javascript:void(0)" onclick="getCommentReplies(${h}, ${f})"><i class="fe fe-corner-up-left"></i> ${f} Reply </a>`),f>1&&(a=`<a class="a-override" href="javascript:void(0)" onclick="getCommentReplies(${h}, ${f})"><i class="fe fe-corner-up-left"></i> ${f} Replies </a>`);let _="";if(t&&t.user&&t.user.uid?t.user.uid:"")_=`<a\n              title="reply"\n              class="font-weight-bold btn-sm btn-outline-dark"\n              href="javascript:void(0)"\n              onclick="parseEditorId('#fcbody${h}', '${h}', 'reply', ${r});"\n            >\n              <i class="fe fe-message-square"></i> \n            </a>`;else{_='<a\n            title="reply"\n            class="font-weight-bold btn-sm btn-outline-dark"\n            href="javascript:void(0)"\n            onclick="showModal(\'#loginOrRegisterModal\')"\n          >\n            <i class="fe fe-message-square"></i> \n          </a>';const e=getNavLink("login"),t=getNavLink("register");$("#modal-title").html(`Please <a class="cpointer modal-nav" href="${e}">Login</a> or <a class="cpointer modal-nav" href="${t}">Sign up</a> to reply a comment`)}let b="";b=v===n?`\n            <div class="equalbox" id="load-cmt${h}">\n            ${a}\n            </div>\n\n            <div class="equalbox">\n                ${_}\n                <a onclick="upvoteComment(${h})" id = "upvote-comment-${h}" title="Upvote" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><i class="icon-like"></i></a>\n                <span id="comment${h}-votes"> ${g} </span>\n                <a onclick="downvoteComment(${h})" id = "downvote-comment-${h}" title="Downvote" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><i class="icon-dislike"></i></a>\n            </div>\n            <div class="equalbox">\n                <a onclick="parseEditorId('#fcbody${h}', '${h}', 'edit comment', ${r});" title="edit comment" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><span><i class="fe fe-edit"></i> </span></a>\n                <a onclick="deleteComment(${h}, ${r})" title="delete comment" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><span><i class="fe fe-trash-2"></i> </span></a>\n            </div>\n          `:`\n          <div class="equalbox" id="load-cmt${h}">\n            ${a}\n          </div>\n          <div class="equalbox">\n          <a class="a-override a-alt"><i class="fe fe-thumbs-up"></i> <span id="comment${h}-votes">${g} </span></a>\n          </div>\n          <div class="equalbox">\n            ${_}\n            <a onclick="upvoteComment(${h})" id = "upvote-comment-${h}" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><i class="icon-like"></i></a>\n            <a onclick="downvoteComment(${h})" id = "downvote-comment-${h}" class="font-weight-bold btn-sm btn-outline-dark" href="javascript:void(0)"><i class="icon-dislike"></i></a>\n          </div>\n          `,s+=`<div class="comment_box inner-box">\n          <div class="row">\n            <div class="col-sm-1 icon_"><div class="hicon ${i.toLowerCase()}">${i}</div></div>\n            <div class="col-sm-11 bod_">\n                <div class="row chead">\n                    <div class="col-sm-9 cwho">\n                        ${o}  <span class="ctime text-muted font-12"><span class="status-icon bg-gray"></span> ${c}</span>\n                    </div>\n                    <div class="col-sm-3 lab_">\n                        <label class="font-12 font-weight-bold ${u}"><i class="${m}"></i> ${d}</label>\n                    </div>\n                </div>\n                <div class="row cbody">\n                    <div class="col-sm-12" id="cdisply${h}">\n                       ${p}\n                    </div>\n                </div>\n                <div class="row cfoot">\n                    ${b}\n                    <div class="mt-2 col-sm-12">\n                        <div class="comment_area hide cform" id="cform${h}">\n                          <div class="row">\n                              \x3c!--<div class="col-sm-1" id="replyHicon${h}">\n\n                              </div>--\x3e\n                              <input type="hidden" id="comment-edit-id${h}" value="add comment">\n                              <input type="hidden" id="cke-init-${h}" value="">\n                              <div class="col-sm-12"><textarea name="content" class="fcbody form-control" placeholder="Leave a comment..." id="fcbody${h}"></textarea></div>\n                              <div class="col-sm-12 error" id ="comment${h}Err"></div>\n                          </div>\n                          <div class="row mt-2">\n                            <div class="col-sm-1"></div>\n                            <div class="col-sm-9"><button onclick="closeForm('#cform${h}')" class="btn btn-success btn-sm"><i class=""></i> Cancel</button></div>\n                            <div class="col-sm-2"><button onclick="saveComment('fcbody${h}', ${h})" class="btn btn-success btn-sm"><i class=""></i> Post</button></div>\n                          </div>\n                      </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div id="inner-box${h}">\n        </div>\n      </div>\n    `}if($(`#inner-box${e}`).html(s),t&&t.comments){const{comments:e}=t;for(let t=0;t<l.length;t++)e.push(l[t]);persistence("comments",e)}else persistence("comments",l)}else $(`#inner-box${e}`).html(s),$(`#load-cmt${e}`).html(a)}))}else alert("Oops! No code selected")}function init_ckeditor(e){const t=$("#ckeditor_id").val().trim();if($(`#cke-init-${e}`).val().trim()){const{ckeditorInstance:e}=document.querySelector(t);e&&e.destroy()}window.myClassicEditor="",ClassicEditor.create(document.querySelector(t)).then((e=>{myClassicEditor=e})).catch((e=>{console.error(e)})),$(`#cke-init-${e}`).val(t)}function validateComment(e){$(e).html("")}function closeForm(e){$(e).toggle()}function parseEditorId(e,t,n,o=0){$("#ckeditor_id").val(e),$("#comment_id_").val(t),$("#reply_to_id").val(o),$(`#comment-edit-id${t}`).val(n),toggleCommentForm(t,n,o)}function toggleCommentForm(e,t="add comment",n=0){const o=`fcbody${e}`,s=`#cform${e}`;$(".comment_area").hide(),$(s).show();const a=currentLoc();if(a.user&&a.user.uid&&a.user.fullname){let t;a.user&&a.user.fullname&&(t=`<div class="hicon">${a.user.fullname[0]}</div>`),$(`#replyHicon${e}`).html(t)}if(printError(`comment${e}Err`,""),"edit comment"==t){console.log("toggle form action is edit comment");let t=[],n={};if(a&&a.comments){t=a.comments;for(let o=0;o<t.length;o++)if(t[o].uid==e){n=t[o];break}myeditors&&myeditors[o]?myeditors[o].setData(n.comment_body):$(`#${o}`).val(n.comment_body)}}else"fcbody0"!=o&&"instructions_input"!=o?myeditors&&myeditors[o]?myeditors[o].setData(""):$(`#${o}`).val(""):myeditors2&&myeditors2[o]?myeditors2[o].setData(""):$(`#${o}`).val("");"fcbody0"!=o&&"instructions_input"!=o&&createEditor(o)}function saveComment(e,t){let n;const o=currentLoc();let s=parseInt($("#reply_to_id").val());const a=$(`#comment-edit-id${t}`).val();if("reply"==a&&(s=t),o&&o.user&&o.user.uid)n=o.user.uid;else{const e=getNavLink("login");gotourl(e)}const l=parseInt(o.code_sel.uid),i=e;let r;r="fcbody0"!=i&&"instructions_input"!=i?myeditors&&myeditors[i]?myeditors[i].getData().trim():$(`#${i}`).val().trim():myeditors2&&myeditors2[i]?myeditors2[i].getData().trim():$(`#${i}`).val().trim();let c=!0;if(""==r?printError(`comment${t}Err`,"Comment content required"):(printError(`comment${t}Err`,""),c=!1),1==c)return!1;let d="/add-comment",m="POST",u={code_snippet_id:l,comment_body:r,replying_to:s,tag:1,added_by:n};"edit comment"==a&&t>0&&(d="/edit-comment",m="PUT",u={comment_body:r,comment_id:t}),crudaction(u,d,m,(e=>{e&&e.success?(clearCkeditorData(i),closeForm(`#cform${t}`),"add comment"==a&&0==s?(persistence("cur_page",1),getCommentsByCodesnippetId()):"reply"==a&&s>0?getCommentReplies(s):reRenderEditedCommentBody(t),successToast(e.message,"toast-top-right")):errorToast(e.message,"toast-top-right")}))}function deleteComment(e=0,t){if(!window.confirm("Are you sure you want to delete your comment?"))return;const n=currentLoc();let o;n&&n.code_sel&&(o=n.code_sel.uid);crudaction({comment_id:e},`/del-comment${`?replying_to=${t}&code_snippet_id=${o}`}`,"DELETE",(e=>{e.success?(0==t&&load_codesnippetById(o),t>0&&getCommentReplies(t),successToast(e.message,"toast-top-right")):errorToast(e.message,"toast-top-right")}))}function focussedInput(e,t){$(e).is(":focus")&&$(t).html("")}function reRenderEditedCommentBody(e){const t=currentLoc();crudaction({},`/comment${`?comment_id=${e}`}`,"GET",(n=>{if(n&&n.success&&n.data&&n.data.comment_body){const{comment_body:o}=n.data;$(`#cdisply${e}`).html(o);let s=[];if(t&&t.comments){s=t.comments;for(let t=0;t<s.length;t++)if(s[t].uid==e){s[t].comment_body=o;break}persistence("comments",s)}}}))}function upvoteComment(e,t="upvote comment"){const n=currentLoc();let o=0;if(!(n&&n.user&&n.user.uid)){showModal("#loginOrRegisterModal");const e=getNavLink("login"),n=getNavLink("register");return void $("#modal-title").html(`Please <a class="cpointer modal-nav" href="${e}">Login</a> or <a class="cpointer modal-nav" href="${n}">Sign up</a> to ${t}`)}o=n.user.uid;crudaction({post_id:e,user_id:o,table:"pr_comments",upvote:1,downvote:0},"/upvote-comment","PUT",(t=>t?t&&1==t.success?($(`#comment${e}-votes`).html(t.votes),successToast(t.message,"toast-top-right")):t&&0==t.success?errorToast(t.message,"toast-top-right"):void 0:errorToast("Server error")))}function downvoteComment(e,t="downvote comment"){const n=currentLoc();let o=0;if(!n.user||!n.user.uid){showModal("#loginOrRegisterModal");const e=getNavLink("login"),n=getNavLink("register");return void $("#modal-title").html(`Please <a class="cpointer modal-nav" href="${e}">Login</a> or <a class="cpointer modal-nav" href="${n}">Sign up</a> to ${t}`)}o=n.user.uid;crudaction({post_id:e,user_id:o,table:"pr_comments",upvote:0,downvote:-1},"/downvote-comment","PUT",(t=>t?t&&1==t.success?($(`#comment${e}-votes`).html(t.votes),successToast(t.message,"toast-top-right")):t&&0==t.success?errorToast(t.message,"toast-top-right"):void 0:errorToast("Server error")))}function reformatDate(e){const t=new Date(e);return`${t.toISOString().split("T")[0]} ${t.toTimeString().split(" ")[0]}`}function momentDatetime(e){return moment(e).fromNow()}const modal=document.getElementById("myModal");function showModal(e){$(e).show(),$("body").addClass("fade_")}function dismissModal(e){$("body").removeClass("fade_"),$(e).hide()}function dismissModal2(e){$(e).removeClass("fade"),$(".modal-backdrop").remove(),$("body").removeClass("modal-open")}function modalView(e,t){const n=e?e.toUpperCase():e;$("#mainModal").html(`\n    <div class="modal-dialog" role="document">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalLabel">${t}</h5>\n            <button type="button" onclick="dismissModal2()" class="close" data-dismiss="modal" aria-label="Close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n        <div class="modal-body">\n            Are you sure you want to ${e} your comment?\n        </div>\n        <div class="modal-footer">\n            <button onclick="dismissModal2()" type="button" class="btn btn-secondary" data-dismiss="modal">Keep</button>\n            <button type="button" onclick="deleteComment(${comment_id} ,${replying_to});" class="btn btn-primary">${n}</button>\n        </div>\n    </div>\n</div>\n    `)}window.onclick=function(e){e.target==modal&&($(".modal").removeClass("fade"),$(".modal-backdrop").remove(),$("body").removeClass("modal-open"))};class MyUploadAdapter{constructor(e){this.loader=e}upload(){return this.loader.file.then((e=>new Promise(((t,n)=>{this._initRequest(),this._initListeners(t,n,e),this._sendRequest(e)}))))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest,t=`${$("#server_").val()}/upload-img`;e.open("POST",t,!0),e.responseType="json"}_initListeners(e,t,n){const{xhr:o}=this,{loader:s}=this,a=`Couldn't upload file: ${n.name}.`;o.addEventListener("error",(()=>t(a))),o.addEventListener("abort",(()=>t())),o.addEventListener("load",(()=>{const{response:n}=o;if(!n||n.error)return t(n&&n.error?n.error.message:a);e({default:n.url})})),o.upload&&o.upload.addEventListener("progress",(e=>{e.lengthComputable&&(s.uploadTotal=e.total,s.uploaded=e.loaded)}))}_sendRequest(e){const t=new FormData;t.append("upload",e),this.xhr.send(t)}}function MyCustomUploadAdapterPlugin(e){e.plugins.get("FileRepository").createUploadAdapter=e=>new MyUploadAdapter(e)}function getckeditorData(e,t="fcbody0"){const n=myeditors&&myeditors[t]?myeditors[t].getData().trim():$(`#${t}`).val().trim();$(e).val(n)}function clearCkeditorData(e){myeditors&&myeditors[e]?myeditors[e].setData(""):$(`#${e}`).val("")}function createEditor(e){if(!myeditors[e])return ClassicEditor.create(document.getElementById(e),{extraPlugins:[MyCustomUploadAdapterPlugin]}).then((t=>{myeditors[e]=t,console.log(myeditors)})).catch((e=>console.error(e.stack)))}function createEditor2(e){if(myeditors2={},!myeditors2[e])return ClassicEditor.create(document.getElementById(e),{extraPlugins:[MyCustomUploadAdapterPlugin]}).then((t=>{myeditors2[e]=t})).catch((e=>console.error(e.stack)))}function hidewelcome(){$("#overin").fadeOut("fast"),$("#layleft").fadeOut("fast")}function showelcome(){$("#layleft").fadeIn("slow")}